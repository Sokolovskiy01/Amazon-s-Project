<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="css/main.css">
        <script type="text/javascript">

            let gameType;

            function createField(width, height) {
                let gameTable = document.getElementById("gameTable");
                gameTable.innerHTML = "";

                for (let i = 0; i < height; i++) {
                    let tableRow = document.createElement("div");
                    tableRow.className = 'table-row';
                    tableRow.id = 'row' + i;
                    for (let j = 0; j < width; j++) {
                        let tableBlock = document.createElement("div");
                        tableBlock.className = 'table-block';
                        tableBlock.id = 'tb' + i + '_' + j;
                        tableBlock.onclick = (function() {
                            var currentI = i;
                            let currJ = j;
                            return function() { 
                                onCellClicked(i, j);
                            }
                        })();
                        tableRow.append(tableBlock);
                    }
                    gameTable.append(tableRow);
                }
            }

            function startGame() {
                gameType = document.gameChoiceForm.gameMode.value;
                if (gameType == 2) {
                    createField(6, 6);
                    placeFigure(0,3, 'figure-black');
                    placeFigure(5,2, 'figure-black');
                    placeFigure(2,0, 'figure-white');
                    placeFigure(3,5, 'figure-white');
                }
                else if (gameType == 3) {
                    createField(8, 8);
                    placeFigure(2,0, 'figure-white');
                    placeFigure(0,3, 'figure-white');
                    placeFigure(2,7, 'figure-white');
                    placeFigure(5,0, 'figure-black');
                    placeFigure(7,4, 'figure-black');
                    placeFigure(5,7, 'figure-black');
                }
                else if (gameType == 4) {
                    createField(10, 10);
                    placeFigure(9,3, 'figure-black');
                    placeFigure(6,0, 'figure-black');
                    placeFigure(9,6, 'figure-black');
                    placeFigure(6,9, 'figure-black');
                    placeFigure(3,0, 'figure-white');
                    placeFigure(0,3, 'figure-white');
                    placeFigure(0,6, 'figure-white');
                    placeFigure(3,9, 'figure-white');
                }
            }

            function placeFigure(i, j, className) {
                let tableCell = document.getElementById('tb' + i + '_' + j);
                tableCell.innerHTML = "";
                let figure = document.createElement('div');
                figure.className = 'figure ' + className;
                tableCell.append(figure);
            }

            function onCellClicked(i, j) {
                alert('Clicked on ' + i + ' ' + j + ' cell');
            }

        </script>
    </head>
    <body>
        <div class="main-game-page">
            <div class="game-column">
                <h2 class="game-title">Amazon's game</h2>
                <div class="main-selector" id="mainSelector" >
                    <h3 class="main-selector-title">Select game type</h3>
                    <button class="game-select-button" id="button_choice_player" >Player VS Player</button>
                    <button class="game-select-button" id="button_choice_ai" >Player VS AI</button>
                </div>
                <div class="main-selector" id="gamePropertiesSelector">
                    <h3 class="main-selector-title">Select game type</h3>
                    <form method="dialog" name="gameChoiceForm" style="display: contents;">
                        <ul class="main-selector-list">
                            <li><input type="radio" value="2" name="gameMode" ><label>2 vs 2</label></li>
                            <li><input type="radio" value="3" name="gameMode" checked><label>3 vs 3</label></li>
                            <li><input type="radio" value="4" name="gameMode" ><label>4 vs 4</label></li>
                        </ul>
                        <button class="game-select-button" id="startGameButton" onclick="startGame()" >Start game</button>
                    </form>
                </div>
                <div class="game-container" id="gameContainer">
                    <div class="game-controls-container"  >

                    </div>
                    <div class="game-table-container" >
                        <div class="game-table" id="gameTable">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>